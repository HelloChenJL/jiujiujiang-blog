---
title: git回滚分支
date: 2026-02-06T05:14:44.090Z
categories:
  - 工作总结
tags:
  - Git
---
# git回滚分支

要退回上一个版本，可以使用Git中的\`**git revert**\`命令或\`**git reset\`**命令。

**1. 使用\`git revert\`命令退回上一个版本（还没进行push，只是想要撤销commit）：**  
– 执行命令\`git log\`，查看提交历史，找到要退回的上一个版本的提交ID（commit ID）。  
– 执行命令\`git revert \`，将指定的提交撤销，并在新的提交中记录撤销操作。

– 执行命令\`git revert HEAD\`，将撤销上一个提交。

– 执行命令\`git revert HEAD~2..HEAD\`，可以撤销从倒数第二个提交到当前HEAD的所有提交。

**2. 使用\`git reset\`命令退回上一个版本（已经push到远程，想要把远程代码也退回）：**  
– 执行命令\`git log\`，找到要退回的上一个版本的提交ID（commit ID）。  
– 执行命令\`git reset –hard \`，将HEAD指针和当前分支移动到指定的提交，丢弃后续的提交。

– 执行命令\`git push –force origin \`，将修改的提交推送到远程仓库。

**3. 注意事项：**  
– 在使用\`git reset\`命令时，要确保你了解其对分支历史的影响。如果你在公共分支上使用\`git reset\`命令，可能会导致其他开发者的提交丢失。  
– 在使用\`git revert\`命令时，每次撤销操作都会创建一个**新的提交**。这意味着，如果有多个连续的提交需要撤销，将会创建多个新的提交。请确保理解这些新提交对于项目历史的影响。  
– 在使用任何Git命令之前，建议先创建一个备份分支，以防止意外操作导致的数据丢失。

**4.使用场景**

项目遇到情况：

*   忘记新建分支，直接在master把刚开发的内容进行了push
    
    *   这种情况应该使用git reset，    
        

*   先将此次提交的记录创建一个新的分支，以免后续reset后修改的内容丢失。
    
*   找到要退回到某个版本的版本号（git log，或者直接复制idea的可视化提交记录上找）
    
*   回退： git reset --hard 版本号（现在当前代码就是没有提交前的代码）
    
*   更新远程分支：git push –force origin
    

*   建了分支但是没有切换，直接在master进行了提交，但是没有push
    
    *   这种情况可以用 cherry-pick（选择性地将特定的提交应用到当前分支）
        
        *   先切换至已经创建的分支
            
        *   选中要cherry-pick的提交记录进行cherry-pick
            
        *   切换回master 进行rest
