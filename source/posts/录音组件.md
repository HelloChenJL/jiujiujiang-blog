---
title: 录音组件
date: 2026-02-06T05:13:51.483Z
categories:
  - 小程序相关
tags:
  - 微信小程序
  - uniapp组件
---
# 录音组件

# 效果

![image2024-4-28_15-32-37.png](https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/confluenceImport/8180135318765114356/confluenceIMG/214207342/214207318.png)![image2024-4-28_15-32-29.png](https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/confluenceImport/8180135318765114356/confluenceIMG/214207342/214207317.png)![image2024-4-28_15-32-14.png](https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/confluenceImport/8180135318765114356/confluenceIMG/214207342/214207316.png)

# 组件名称

**nb-voice-record**

由于直接从npm下载失败目前放到component文件夹下。

# 参数列表

| 参数名 | 类型 | 默认值 | 作用 | 注意事项 |
| --- | --- | --- | --- | --- |
| recordOptions | Object | {duration:60000} | 录音配置 | 各端支持情况不同，请自行查看<br>[官方说明](https://uniapp.dcloud.net.cn/api/media/record-manager.html#getrecordermanager) |
| btnStyle | Object | 请查看源码 | 按钮样式 | 对象格式 |
| btnHoverFontcolor | String | #000 | 按钮长按时文字颜色 |  |
| btnHoverBgcolor | String | whitesmoke | 按钮长按时背景颜色 |  |
| btnDefaultText | String | 长按开始录音 | 初始按钮文字 |  |
| btnRecordingText | String | 录音中 | 录制时按钮文字 |  |
| vibrate | Boolean | true | 震动反馈 | 弹窗、滑动取消时 |
| popupTitle | String | 正在录制音频 | 弹窗顶部文字 |  |
| popupDefaultTips | String | 松手完成录音 | 录制时弹窗底部提示 |  |
| popupCancelTips | String | 松手取消录音 | 滑动取消时弹窗底部提示 |  |
| popupMaxWidth | Number | 600 | 弹窗展开后宽度 | 注意这里几个单位都是rpx |
| popupMaxHeight | Number | 300 | 弹窗展开后高度 |  |
| popupFixBottom | Number | 200 | 弹窗展开后距底部高度 |  |
| popupBgColor | String | whitesmoke | 弹窗背景颜色 |  |
| lineHeight | Number | 50 | 声波高度 |  |
| lineStartColor | String | royalblue | 声波波谷时颜色色值 | 色值或者颜色名均可 |
| lineEndColor | String | indianred | 声波波峰时颜色色值 |  |

# 平台兼容性

  

| Vue2 | Vue3 |
| --- | --- |
| √ | × |

| App | 快应用 | 微信小程序 | 支付宝小程序 | 百度小程序 | 字节小程序 | QQ小程序 |
| --- | --- | --- | --- | --- | --- | --- |
| HBuilderX 3.1.0 app-vue | × | √ | × | × | × | × |

# 组件使用

  

```text/javascript
<template>
  <view>
    <nb-voice-record
      @startRecord="start"
      @endRecord="end"
      @cancelRecord="cancel"
    ></nb-voice-record>
    <button @tap="playVoice">播放录音</button>
  </view>
</template>
<script>
import nbVoiceRecord from "@/components/nb-voice-record/nb-voice-record.vue";
const innerAudioContext = uni.createInnerAudioContext();
export default {
  components: { nbVoiceRecord },
  data() {
    return {
      voicePath: "",
    };
  },
  methods: {
    start() {
      // 开始录音
    },
    end(event) {
      // 结束录音并处理得到的录音文件
      // event中，app端仅有tempFilePath字段，微信小程序还有duration和fileSize两个字段
      this.voicePath = event.tempFilePath;
    },
    cancel() {
      // 用户取消录音
    },
    playVoice() {
      console.log("播放录音", this.voicePath);
      innerAudioContext.obeyMuteSwitch = false;
      if (this.voicePath) {
        innerAudioContext.src = this.voicePath;
        innerAudioContext.play();
      }
    },
  },
};
</script>
<style></style>

```

# 文档

[https://ext.dcloud.net.cn/plugin?id=9595](https://ext.dcloud.net.cn/plugin?id=9595)
