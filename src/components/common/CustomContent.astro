---
import type { ContentConfig } from '@constants/content-config';
import type { AstroComponentFactory } from 'astro/runtime/server/index.js';
import { defaultContentConfig } from '@constants/content-config';
import EmbedHydrator from '@components/embed/EmbedHydrator';
import { CustomContentEnhancer } from './CustomContentEnhancer';

interface Props {
  Content: AstroComponentFactory;
  config?: Partial<ContentConfig>;
}

const { Content, config = {} } = Astro.props;
const finalConfig = { ...defaultContentConfig, ...config };
---

<div class="custom-content">
  <Content />
</div>

{/* Only load EmbedHydrator if tweet embeds are enabled (link previews are now server-rendered) */}
{finalConfig.enableTweetEmbed && <EmbedHydrator client:load />}
<CustomContentEnhancer client:load config={finalConfig} />
